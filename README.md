## gRPC Сервер Распознавания Номерных Знаков и Стран

Этот проект предоставляет gRPC-сервис для обнаружения и распознавания автомобильных номерных знаков, способный определять как номер автомобиля, так и страну регистрации. Сервис использует ИИ-модели для обработки изображений и извлечения информации с номерных знаков вместе с оценками достоверности.

### Возможности

- Обнаружение номерных знаков на изображениях
- Распознавание номеров автомобилей
- Определение страны номерного знака
- Оценка достоверности для всех предсказаний
- Поддержка форматов номерных знаков разных стран (КР, РФ, КЗ, КНР, УЗ)
- Аутентификация через защищенный токен
- Эффективная обработка изображений с автоматическим управлением временными файлами
- Поддержка ускорения GPU через NVIDIA CUDA

### Стек технологий

- Python с фреймворком PyTorch
- gRPC для API-коммуникации
- PaddleOCR для распознавания текста
- Кастомные нейронные сети для обнаружения номерных знаков и распознавания стран
- RealESRGAN для улучшения качество изображений
- Docker для контейнеризации и развертывания

### Установка и настройка

1. Клонировать репозиторий:
```bash
git clone https://github.com/your-username/plate_number_and_country_recognition.git
cd plate_number_and_country_recognition
```

2. Настроить переменные окружения:
```bash
cp .env.example .env
```
Отредактируйте файл `.env` для настройки:
- `APP_PORT`: порт gRPC сервера (по умолчанию: 50052)
- `SECRET_TOKEN`: токен аутентификации для API-запросов
- `TZ`: часовой пояс (по умолчанию: Asia/Bishkek)

3. Собрать и запустить с Docker:
```bash
docker compose build
docker compose up -d
```

### Архитектура сервиса

Сервис работает по простой модели запрос-ответ:
1. Клиент отправляет изображение и токен аутентификации
2. Сервер проверяет токен
3. Изображение обрабатывается через конвейер ИИ:
   - Обнаружение номерного знака
   - Предобработка и улучшение изображения
   - Предсказание страны
   - Распознавание номера с оптимизациями для конкретных стран
4. Результаты возвращаются с оценками достоверности

### Справочник по API

Сервис использует Protocol Buffers (protobuf) для определения API:

```protobuf
service ImageProcessingService {
  rpc ProcessImage (ImageRequest) returns (ImageResponse);
}

message ImageRequest {
  string token = 1;
  bytes image_data = 2;
}

message ImageResponse {
  string license_plate_number = 1;
  float license_plate_number_score = 2;
  string license_plate_country = 3;
  float license_plate_country_score = 4;
}
```
